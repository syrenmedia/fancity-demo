<div id='map'></div>


<script>
L.mapbox.accessToken = 'pk.eyJ1IjoiY2FsbGV5bnllIiwiYSI6ImNpaTJocjVyeTAwb3F0bmtxZ2F6MnE0MmkifQ.k6SSGLxaSKrutYsrqhAXRQ';
var mapTooltipsJS = L.mapbox.map('map', 'mapbox.emerald')
  .setView([34.15, -118.43], 13);
var myLayer = L.mapbox.featureLayer().addTo(mapTooltipsJS);

var geojson = [
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [-118.4079743,34.1425325]
    },
    "properties": {
      "title": "Rocco's",
      "description": "12514 Ventura Blvd., Studio City, CA 91604",
      "image": "{{root}}assets/img/roccos-tavern.jpg",
      "fans" : "4 Packer fans",
      "icon": {
          "iconUrl": "{{root}}assets/img/map-gbp-smallest.png",
          "iconSize": [30, 37], // size of the icon
          "iconAnchor": [25, 25], // point of the icon which will correspond to marker's location
          "popupAnchor": [0, -25], // point from which the popup should open relative to the iconAnchor
          "className": "dot"
      }
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [-118.5089319,34.1936457]
    },
    "properties": {
      "title": "Ujpest Sports Bar",
      "description": "14034 Vanowen Street, Van Nuys, CA 91405",
      "image": "{{root}}assets/img/packerbars.jpg",
      "fans" : "8 Packer fans",
      "icon": {
          "iconUrl": "{{root}}assets/img/map-gbp-smaller.png",
          "iconSize": [40, 50], // size of the icon
          "iconAnchor": [25, 25], // point of the icon which will correspond to marker's location
          "popupAnchor": [0, -25], // point from which the popup should open relative to the iconAnchor
          "className": "dot"
      }
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [-118.4740486,34.1574254]
    },
    "properties": {
      "title": "The Rec Room",
      "description": "14034 Vanowen Street, Van Nuys, CA 91405",
      "image": "http://s3-media2.fl.yelpcdn.com/bphoto/9YI4tZm2YVXsKlR9m4d8tA/o.jpg",
      "fans" : "11 Packer fans",
      "icon": {
          "iconUrl": "{{root}}assets/img/map-gbp-small.png",
          "iconSize": [50, 62], // size of the icon
          "iconAnchor": [25, 25], // point of the icon which will correspond to marker's location
          "popupAnchor": [0, -25], // point from which the popup should open relative to the iconAnchor
          "className": "dot"
      }
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [-118.4423201,34.1410331]
    },
    "properties": {
      "title": "Fox & Hounds Pub",
      "description": "11100 Ventura Boulevard, Studio City, CA 91604",
      "image": "http://dtfjihky7xwic.cloudfront.net/sites/default/files/poi_images/the-fox-and-houndsfox-hound0.jpg",
      "fans" : "14 Packer fans",
      "icon": {
          "iconUrl": "{{root}}assets/img/map-gbp-medium.png",
          "iconSize": [65, 80], // size of the icon
          "iconAnchor": [25, 25], // point of the icon which will correspond to marker's location
          "popupAnchor": [0, -25], // point from which the popup should open relative to the iconAnchor
          "className": "dot"
      }
    }
  }
];

// Set a custom icon on each marker based on feature properties.
myLayer.on('layeradd', function(e) {
  var marker = e.layer,
    feature = marker.feature;
  marker.setIcon(L.icon(feature.properties.icon));
  var content = '<h2>'+ feature.properties.title+'<\/h2><h3>' + feature.properties.fans + ' are here.</h3><h4>' + feature.properties.description  + '</h4><img src="'+feature.properties.image+'" alt="">';
  marker.bindPopup(content);
});
myLayer.setGeoJSON(geojson);
mapTooltipsJS.scrollWheelZoom.disable();
</script>
</body>
</html>